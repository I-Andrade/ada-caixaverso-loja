<div
  class="w-full h-16 bg-gray-800 text-white flex items-center justify-between px-4"
>
  <div
    class="flex items-center gap-3 cursor-pointer hover:text-blue-500"
    [routerLink]="[PATHS.BASE]"
  >
    <img src="logo.png" alt="Logotipo Loja CaixaVerso" class="h-10" />
    <span class="text-xl font-bold">{{ title }}</span>
  </div>
  <div class="text-sm hidden sm:flex items-center">
    <span>{{ subtitle }}</span>
  </div>
  <nav class="flex space-x-4">
    @if (userSignal()?.role === 'admin' && isLoggedIn()) {
    <button
      mat-icon-button
      class="relative mr-2"
      [routerLink]="[PATHS.BASE, PATHS.ADMIN]"
      aria-label="Administração"
      matTooltip="Área administrativa"
    >
      <span class="material-icons text-2xl text-white"
        >admin_panel_settings</span
      >
    </button>
    }
    <button
      mat-icon-button
      class="relative ml-2"
      [routerLink]="[PATHS.BASE, PATHS.CART]"
      aria-label="Carrinho"
      matTooltip="Ver carrinho"
    >
      <span class="material-icons text-2xl text-white">shopping_cart</span>
      @if (cartCountSignal() > 0) {
      <span
        class="absolute top-0 right-0 bg-amber-600 text-white rounded-full px-2 text-xs"
      >
        {{ cartCountSignal() }}
      </span>
      }
    </button>
    @if (isLoggedIn()) {
    <div class="relative items-center flex gap-2">
      <button
        class="p-0 border-0 bg-transparent cursor-pointer avatar-btn"
        (click)="showUserMenu = !showUserMenu"
        matTooltip="Ver perfil"
      >
        <img
          [src]="userSignal()?.avatar"
          alt="mat-card-avatar"
          class="h-8 w-8 rounded-full object-cover"
        />
      </button>
      @if (showUserMenu) {
      <div
        class="user-menu absolute right-3 top-3 mt-2 bg-white text-gray-800 rounded shadow-lg py-2 px-4 z-50 min-w-[120px] flex flex-col items-center"
      >
        <img
          [src]="userSignal()?.avatar"
          alt="mat-card-avatar"
          class="h-10 w-10 rounded-full object-cover mb-2"
        />
        <span class="mb-2 font-semibold">{{ userFirstNameSignal() }}</span>
        <button
          mat-button
          class="bg-slate-300"
          (click)="logout()"
          matTooltip="Sair da conta"
        >
          Sair
        </button>
      </div>
      }
    </div>
    } @else {
    <button
      mat-button
      class="bg-slate-300"
      [routerLink]="[PATHS.BASE, PATHS.AUTH, PATHS.LOGIN]"
      matTooltip="Entrar na conta"
    >
      Entrar
    </button>
    }
  </nav>
</div>
